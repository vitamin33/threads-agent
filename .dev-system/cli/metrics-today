#!/usr/bin/env python3
"""
Daily Metrics Reporter
Shows yesterday's key development metrics - M1 implementation
"""

import sys
from pathlib import Path

# Add dev-system to path
DEV_SYSTEM_ROOT = Path(__file__).parent.parent
sys.path.insert(0, str(DEV_SYSTEM_ROOT))

def main():
    try:
        from ops.telemetry import get_daily_metrics
        metrics = get_daily_metrics()
        
        print("ðŸ“Š Yesterday's Development Metrics")
        print("=" * 40)
        print(f"Success Rate: {metrics.get('success_rate', 0):.1%}")
        print(f"P95 Latency: {metrics.get('p95_latency_ms', 0):.0f}ms")
        print(f"Total Cost: ${metrics.get('total_cost', 0):.2f}")
        print(f"Top Agent: {metrics.get('top_agent', 'N/A')}")
        print(f"Failed Calls: {metrics.get('failed_calls', 0)}")
        
        if metrics.get('alerts'):
            print("\nðŸš¨ Alerts:")
            for alert in metrics['alerts']:
                print(f"  - {alert}")
                
    except ImportError:
        print("ðŸ“Š Telemetry system not yet implemented")
        print("ðŸ”„ Run: .dev-system/cli/dev-system init --telemetry")
        print()
        print("Meanwhile, showing placeholder metrics:")
        print("Success Rate: 92.5%")
        print("P95 Latency: 1,245ms") 
        print("Total Cost: $3.47")
        print("Top Agent: persona_runtime")
        print("Failed Calls: 12")

if __name__ == "__main__":
    main()