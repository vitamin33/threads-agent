# mypy.ini — repo-level config
[mypy]
python_version = 3.11
strict = True
plugins = sqlalchemy.ext.mypy.plugin
exclude = (?x)(^templates/service-template/|services/common/ai_error_recovery\.py$|services/common/searxng_wrapper\.py$|services/common/ai_test_generator\.py$|services/persona_runtime/search_enhanced_runtime\.py$|services/persona_runtime/persona_hot_reload\.py$|services/viral_engine/|services/threads_adaptor/tests/|services/dashboard/realtime_dashboard\.py$)

# --- ignore Alembic migration scripts -----------------
[mypy-alembic.*]
ignore_missing_imports = True

[mypy-services.orchestrator.db.alembic.*]
ignore_errors = True

# --- 3rd-party libs mypy shouldn’t descend into -------
[mypy-fastapi.*]
ignore_missing_imports = True
[mypy-celery.*]
ignore_missing_imports = True
[mypy-scripts.ci.*]
ignore_errors = True
[mypy-sse_starlette.*]
ignore_missing_imports = True
[mypy-httpx.*]
ignore_missing_imports = True
[mypy-dotenv.*]
ignore_missing_imports = True

[mypy.tests.*]
disallow_untyped_defs = False
[mypy.pytest.*]
ignore_missing_imports = True
[mypy-requests.*]
ignore_missing_imports = True
[mypy-pytest]
ignore_missing_imports = True
[mypy-fakeredis.*]
ignore_missing_imports = True
[mypy-psycopg2.*]
ignore_missing_imports = True
[mypy-prometheus_client.*]
ignore_missing_imports = True

[mypy-services.viral_engine.tests.*]
ignore_errors = True

# Temporarily ignore auxiliary files with extensive type issues
[mypy-services.orchestrator.search_endpoints]
ignore_errors = True

[mypy-services.threads_adaptor.main]
ignore_errors = True

[mypy-services.threads_adaptor.tests.*]
ignore_errors = True

[mypy-services.revenue.tests.*]
ignore_errors = True

[mypy-services.revenue.db.alembic.*]
ignore_errors = True

[mypy-services.achievement_collector.*]
ignore_errors = True

[mypy-aiohttp.*]
ignore_missing_imports = True

[mypy-stripe.*]
ignore_missing_imports = True

[mypy-email_validator.*]
ignore_missing_imports = True

[mypy-github.*]
ignore_missing_imports = True

[mypy-anthropic.*]
ignore_missing_imports = True

[mypy-scripts.achievement-local-store]
ignore_errors = True

[mypy-scripts.achievement-local-store.*]
ignore_errors = True

[mypy-achievement-local-store]
ignore_errors = True

[mypy-markdown.*]
ignore_missing_imports = True
