# mypy.ini — repo-level config
[mypy]
python_version = 3.11
strict = True
plugins = sqlalchemy.ext.mypy.plugin
exclude = (?x)(^templates/service-template/|services/common/ai_error_recovery\.py$|services/common/searxng_wrapper\.py$|services/common/ai_test_generator\.py$|services/persona_runtime/search_enhanced_runtime\.py$|services/persona_runtime/persona_hot_reload\.py$|services/viral_engine/|services/threads_adaptor/tests/|services/dashboard/realtime_dashboard\.py$)

# --- ignore Alembic migration scripts -----------------
[mypy-alembic.*]
ignore_missing_imports = True

[mypy-services.orchestrator.db.alembic.*]
ignore_errors = True

# --- 3rd-party libs mypy shouldn’t descend into -------
[mypy-fastapi.*]
ignore_missing_imports = True
[mypy-celery.*]
ignore_missing_imports = True
[mypy-scripts.ci.*]
ignore_errors = True
[mypy-sse_starlette.*]
ignore_missing_imports = True
[mypy-httpx.*]
ignore_missing_imports = True
[mypy-dotenv.*]
ignore_missing_imports = True

[mypy.tests.*]
disallow_untyped_defs = False
[mypy.pytest.*]
ignore_missing_imports = True
[mypy-requests.*]
ignore_missing_imports = True
[mypy-pytest]
ignore_missing_imports = True
[mypy-fakeredis.*]
ignore_missing_imports = True
[mypy-psycopg2.*]
ignore_missing_imports = True
[mypy-prometheus_client.*]
ignore_missing_imports = True

[mypy-services.viral_engine.tests.*]
ignore_errors = True

# --- Skip problematic files with many type issues -------
[mypy-services.common.ai_error_recovery]
ignore_errors = True

[mypy-services.common.ai_test_generator]
ignore_errors = True

[mypy-services.persona_runtime.search_enhanced_runtime]
ignore_errors = True

[mypy-services.persona_runtime.persona_hot_reload]
ignore_errors = True

[mypy-services.revenue.*]
ignore_errors = True

[mypy-services.revenue.db.alembic.*]
ignore_errors = True

# --- 3rd party imports for revenue service -------
[mypy-stripe.*]
ignore_missing_imports = True

[mypy-email_validator.*]
ignore_missing_imports = True

[mypy-qdrant_client.*]
ignore_missing_imports = True

[mypy-langgraph.*]
ignore_missing_imports = True

[mypy-langchain.*]
ignore_missing_imports = True

[mypy-watchdog.*]
ignore_missing_imports = True

[mypy-yaml.*]
ignore_missing_imports = True

[mypy-uvicorn.*]
ignore_missing_imports = True

[mypy-aiohttp.*]
ignore_missing_imports = True

# --- Skip services with type issues -------
[mypy-services.common.searxng_wrapper]
ignore_errors = True

[mypy-services.common.metrics]
ignore_errors = True

[mypy-services.viral_engine.*]
ignore_errors = True

[mypy-services.threads_adaptor.*]
ignore_errors = True

[mypy-services.celery_worker.*]
ignore_errors = True

[mypy-services.orchestrator.main]
ignore_errors = True

[mypy-services.orchestrator.search_endpoints]
ignore_errors = True

[mypy-services.dashboard.*]
ignore_errors = True

[mypy-services.common.tests.*]
ignore_errors = True
